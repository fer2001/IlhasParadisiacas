<div class="container mb-5">
  <% if @island.photos.attached? %>
    <div class="banner mt-4 w-100">
      <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <% @island.photos.each_with_index do |photo, index| %>
            <div class="carousel-item  <%= index.zero? ? "active" : "" %>">
              <%= cl_image_tag photo.key, crop: :fill %>
            </div>
          <% end %>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
      <div class="island-infos">
        <h1><%= @island.name %></h1>
        <p>Location: <%=@island.location %></p>
      </div>

      <div class="user-actions p-3">
        <% if @island.user == current_user %>
          <a href="" type="button" class="btn-helper" data-bs-toggle="modal" data-bs-target="#exampleModal">
            <span><i class="fa-solid fa-pencil"></i> Edit island</span>
          </a>
          <span class="text-white"> | </span>
          <%= link_to @island, class: "btn-delete", data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this list?" } do %>
            <span><i class="fa-solid fa-trash"></i> Delete</span>
          <% end %>
        <% end %>
      </div>
    </div>
  <% else %>
    <div class="banner mt-4 placeholder w-100">

      <div class="island-infos">
        <h1><%= @island.name %></h1>
        <p>Location: <%=@island.location %></p>
      </div>

      <div class="user-actions p-3">
        <% if @island.user == current_user %>
          <a href="" type="button" class="btn-helper" data-bs-toggle="modal" data-bs-target="#exampleModal">
            <span><i class="fa-solid fa-pencil"></i> Edit island</span>
          </a>
          <span class="text-white"> | </span>
          <%= link_to @island, class: "btn-delete", data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this list?" } do %>
            <span><i class="fa-solid fa-trash"></i> Delete</span>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>
  <% if @island.user != current_user %>
    <div class="information">
      <div class="row">
        <div class="island-infos col-sm-8 mt-5">
          <p><strong>Hosted by: </strong><%= @island.user.name %></p>
          <hr>
          <p><strong>Description</strong><br><%= @island.description %></p>
          <%# adicionar uma foto de perfil para o usuário %>
          <hr>
        </div>

        <div class="col-sm-4 mt-5">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title">R$ <%= @island.price %> per night</h5>
              <p class="card-text">calendário</p>
              <%= link_to "Rent #{@island.name}", new_island_order_path(@island), class: "btn btn-primary" %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% else %>
    <div class="island-infos mt-5">
      <p><strong>Hosted by: </strong><%= @island.user.name %></p>
      <hr>
      <p><strong>Description</strong><br><%= @island.description %></p>
    </div>
  <% end %>


  <div class="map mt-5">
    <h4>You will be here</h4>
    <div style="width: 100%; height: 600px;"
      data-controller="map"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  </div>

</div>

<%= render "modal", island: @island %>
